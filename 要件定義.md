# MineDevOps 要件定義書

## 1. サービス概要

### 1.1 サービス名
MineDevOps（仮）

### 1.2 目的
ユーザーにMinecraft Java Editionの開発サーバーを提供し、GitHub連携による自動ビルド・デプロイ機能とポイントシステムによるリソース管理を実現するPaaSサービス

## 2. 機能要件

### 2.1 サーバー管理機能

#### 2.1.1 サーバー作成・管理
- **FS-001**: ユーザーは1つのMinecraft開発サーバーのみ作成可能
- **FS-002**: 新規サーバー作成時は既存サーバーの削除が必要
- **FS-003**: Minecraft Java Editionのバージョンをユーザーが選択可能
- **FS-004**: サーバーはユーザーアクセス時に自動起動
- **FS-005**: 接続数が0になった場合に自動停止してリソース節約
- **FS-016**: デフォルトの最大接続数は5人
- **FS-017**: ポイント消費により接続数を段階的に拡張可能

#### 2.1.2 GitHub連携
- **FS-006**: GitHubリポジトリとの連携機能
- **FS-007**: GitHubへのpush時に自動ビルド・デプロイを実行
- **FS-020**: SpigotおよびPaperプラグイン構成のリポジトリに対応
- **FS-021**: デプロイ対象ブランチをユーザーが選択可能
- **FS-022**: デプロイ失敗時は前回成功バージョンにロールバック
- **FS-023**: デプロイ失敗時にユーザーにエラー通知を送信

### 2.2 ポイントシステム

#### 2.2.1 ポイント管理
- **FS-008**: ユーザーごとのポイント残高管理
- **FS-009**: サーバー起動中は時間単位でポイントを消費
- **FS-018**: 初回登録時に500ポイントを付与
- **FS-019**: 紹介コードによるポイント追加付与機能

#### 2.2.2 ポイント獲得
- **FS-010**: 動画リワード視聴によるポイント付与
- **FS-011**: 記事投稿による報酬ポイント付与
- **FS-012**: 他ユーザーとのコミュニケーション活性化による報酬
- **FS-013**: 他の自社サービスとの連携によるポイント獲得

### 2.3 ユーザー体験

#### 2.3.1 サーバー接続
- **FS-014**: ユーザーアクセスから起動までのシームレスな接続体験
- **FS-015**: 起動中の場合はユーザーに適切な状況通知

## 3. 非機能要件

### 3.1 パフォーマンス要件
- **NF-001**: サーバー起動時間の最適化
- **NF-002**: 複数サーバーの同時管理による効率的なリソース利用

### 3.2 スケーラビリティ要件
- **NF-003**: 1台のホストマシンで複数コンテナによる複数サーバー起動
- **NF-004**: 起動サーバー数に応じたホストマシンの動的増減

### 3.3 セキュリティ要件
- **NF-005**: ユーザー作成コードのデプロイ時のセキュリティ担保
- **NF-006**: 外部への攻撃防止のためのネットワーク制御
- **NF-007**: 外部通信許可範囲の適切な制限

## 4. 技術要件

### 4.1 対象プラットフォーム
- **TF-001**: Minecraft Java Edition対応
- **TF-002**: ユーザー選択可能なMinecraftバージョン対応

### 4.2 技術スタック
- **TF-003**: Laravel（バックエンド）
- **TF-004**: InertiaJS + Vue.js（フロントエンド）
- **TF-005**: TailwindCSS + DaisyUI（UI）
- **TF-006**: Laravel Breeze（認証）
- **TF-007**: Docker + Laravel Sail（開発環境）

## 5. 制約事項・懸念事項

### 5.1 技術的制約
- **CN-001**: ポート数制限によるサーバー数上限
- **CN-002**: ユーザーアクセスから起動までの時間遅延の可能性

### 5.2 セキュリティ制約
- **CN-003**: ユーザー生成コードによるセキュリティリスク
- **CN-004**: 外部通信制御の適切な実装

## 6. 未確定事項（要ヒアリング）

### 6.1 ポイントシステム詳細
- サーバー起動時の時間単位消費ポイント数（1時間あたり何ポイント？）
- 各種報酬でのポイント付与量（後日決定予定）
- 接続数拡張時のポイント消費量（暫定100ポイント、段階設定の詳細）
- 紹介コードによる追加付与ポイント数

### 6.2 インフラ・運用詳細
- サーバー自動停止：無接続から30秒後に停止
- 外部通信制限：Minecraftクライアント接続のみ許可（HTTP/HTTPS等の外部通信は禁止）

### 6.3 GitHub連携詳細
- SpigotおよびPaperプラグイン構成の詳細要件（pom.xml/build.gradleの必須項目等）
- ビルド環境の構築方法（Java version、Maven/Gradle設定）

### 6.4 ユーザー体験詳細
- サーバー起動時間の想定値
- 起動中ユーザー向けメッセージ内容
- サーバー削除時のデータ保持期間