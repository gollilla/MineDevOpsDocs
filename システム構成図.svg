<?xml version="1.0" encoding="UTF-8"?>
<svg width="1200" height="800" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .title { font-family: Arial, sans-serif; font-size: 24px; font-weight: bold; fill: #333; }
      .subtitle { font-family: Arial, sans-serif; font-size: 16px; font-weight: bold; fill: #555; }
      .label { font-family: Arial, sans-serif; font-size: 12px; fill: #333; }
      .small-label { font-family: Arial, sans-serif; font-size: 10px; fill: #666; }
      .web-server { fill: #4CAF50; stroke: #45a049; stroke-width: 2; }
      .database { fill: #2196F3; stroke: #1976D2; stroke-width: 2; }
      .minecraft { fill: #FF9800; stroke: #F57C00; stroke-width: 2; }
      .load-balancer { fill: #9C27B0; stroke: #7B1FA2; stroke-width: 2; }
      .github { fill: #333; stroke: #222; stroke-width: 2; }
      .arrow { stroke: #666; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
      .bidirectional { stroke: #666; stroke-width: 2; fill: none; marker-end: url(#arrowhead); marker-start: url(#arrowhead); }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#666" />
    </marker>
  </defs>
  
  <!-- Title -->
  <text x="600" y="30" class="title" text-anchor="middle">MineDevOps システム構成図</text>
  
  <!-- User -->
  <circle cx="100" cy="80" r="25" fill="#E91E63" stroke="#C2185B" stroke-width="2"/>
  <text x="100" y="85" class="label" text-anchor="middle" fill="white">User</text>
  
  <!-- Load Balancer -->
  <rect x="250" y="55" width="100" height="50" class="load-balancer" rx="5"/>
  <text x="300" y="75" class="label" text-anchor="middle" fill="white">Load</text>
  <text x="300" y="90" class="label" text-anchor="middle" fill="white">Balancer</text>
  
  <!-- Web Servers -->
  <rect x="450" y="30" width="80" height="40" class="web-server" rx="5"/>
  <text x="490" y="50" class="small-label" text-anchor="middle" fill="white">Web Server 1</text>
  <text x="490" y="62" class="small-label" text-anchor="middle" fill="white">(Laravel)</text>
  
  <rect x="450" y="80" width="80" height="40" class="web-server" rx="5"/>
  <text x="490" y="100" class="small-label" text-anchor="middle" fill="white">Web Server 2</text>
  <text x="490" y="112" class="small-label" text-anchor="middle" fill="white">(Laravel)</text>
  
  <rect x="450" y="130" width="80" height="50" class="web-server" rx="5"/>
  <text x="490" y="145" class="small-label" text-anchor="middle" fill="white">Web Server 3</text>
  <text x="490" y="157" class="small-label" text-anchor="middle" fill="white">(Master +</text>
  <text x="490" y="169" class="small-label" text-anchor="middle" fill="white">Scale Mgr)</text>
  
  <!-- Database Layer -->
  <rect x="650" y="60" width="80" height="40" class="database" rx="5"/>
  <text x="690" y="80" class="small-label" text-anchor="middle" fill="white">MySQL</text>
  <text x="690" y="92" class="small-label" text-anchor="middle" fill="white">Database</text>
  
  <rect x="650" y="110" width="80" height="40" class="database" rx="5"/>
  <text x="690" y="130" class="small-label" text-anchor="middle" fill="white">Redis</text>
  <text x="690" y="142" class="small-label" text-anchor="middle" fill="white">Cache</text>
  
  <!-- GitHub -->
  <rect x="50" y="200" width="80" height="40" class="github" rx="5"/>
  <text x="90" y="220" class="small-label" text-anchor="middle" fill="white">GitHub</text>
  <text x="90" y="232" class="small-label" text-anchor="middle" fill="white">Repository</text>
  
  <!-- CI/CD Pipeline -->
  <rect x="200" y="200" width="100" height="40" class="load-balancer" rx="5"/>
  <text x="250" y="220" class="small-label" text-anchor="middle" fill="white">CI/CD Pipeline</text>
  <text x="250" y="232" class="small-label" text-anchor="middle" fill="white">(GitHub Actions)</text>
  
  
  <!-- Cloud Provider -->
  <rect x="650" y="200" width="100" height="40" class="load-balancer" rx="5"/>
  <text x="700" y="220" class="small-label" text-anchor="middle" fill="white">Cloud Provider</text>
  <text x="700" y="232" class="small-label" text-anchor="middle" fill="white">(AWS/GCP)</text>
  
  <!-- Minecraft Hosts -->
  <text x="600" y="300" class="subtitle" text-anchor="middle">Minecraft Server Hosts</text>
  
  <!-- Host 1 -->
  <rect x="200" y="330" width="120" height="80" fill="#FFF3E0" stroke="#FF9800" stroke-width="2" rx="5"/>
  <text x="260" y="350" class="label" text-anchor="middle">Host 1</text>
  
  <rect x="210" y="360" width="40" height="20" class="minecraft" rx="2"/>
  <text x="230" y="372" class="small-label" text-anchor="middle" fill="white">MC-1</text>
  
  <rect x="260" y="360" width="40" height="20" class="minecraft" rx="2"/>
  <text x="280" y="372" class="small-label" text-anchor="middle" fill="white">MC-2</text>
  
  <rect x="210" y="385" width="40" height="20" class="minecraft" rx="2"/>
  <text x="230" y="397" class="small-label" text-anchor="middle" fill="white">MC-3</text>
  
  <!-- Host 2 -->
  <rect x="350" y="330" width="120" height="80" fill="#FFF3E0" stroke="#FF9800" stroke-width="2" rx="5"/>
  <text x="410" y="350" class="label" text-anchor="middle">Host 2</text>
  
  <rect x="360" y="360" width="40" height="20" class="minecraft" rx="2"/>
  <text x="380" y="372" class="small-label" text-anchor="middle" fill="white">MC-4</text>
  
  <rect x="410" y="360" width="40" height="20" class="minecraft" rx="2"/>
  <text x="430" y="372" class="small-label" text-anchor="middle" fill="white">MC-5</text>
  
  <!-- Host N (Auto-scaled) -->
  <rect x="500" y="330" width="120" height="80" fill="#E8F5E8" stroke="#4CAF50" stroke-width="2" stroke-dasharray="5,5" rx="5"/>
  <text x="560" y="350" class="label" text-anchor="middle">Host N</text>
  <text x="560" y="370" class="small-label" text-anchor="middle">(Auto-scaled)</text>
  
  <rect x="510" y="385" width="40" height="20" class="minecraft" rx="2"/>
  <text x="530" y="397" class="small-label" text-anchor="middle" fill="white">MC-N</text>
  
  <!-- Management Agent -->
  <rect x="700" y="330" width="100" height="80" fill="#E3F2FD" stroke="#2196F3" stroke-width="2" rx="5"/>
  <text x="750" y="350" class="label" text-anchor="middle">Management</text>
  <text x="750" y="365" class="label" text-anchor="middle">Agent</text>
  <text x="750" y="385" class="small-label" text-anchor="middle">- Container Mgmt</text>
  <text x="750" y="400" class="small-label" text-anchor="middle">- Monitoring</text>
  
  <!-- Monitoring Layer -->
  <text x="600" y="480" class="subtitle" text-anchor="middle">監視・ログ基盤</text>
  
  <rect x="200" y="500" width="80" height="40" class="database" rx="5"/>
  <text x="240" y="520" class="small-label" text-anchor="middle" fill="white">Prometheus</text>
  <text x="240" y="532" class="small-label" text-anchor="middle" fill="white">Metrics</text>
  
  <rect x="300" y="500" width="80" height="40" class="database" rx="5"/>
  <text x="340" y="520" class="small-label" text-anchor="middle" fill="white">Grafana</text>
  <text x="340" y="532" class="small-label" text-anchor="middle" fill="white">Dashboard</text>
  
  <rect x="400" y="500" width="80" height="40" class="database" rx="5"/>
  <text x="440" y="520" class="small-label" text-anchor="middle" fill="white">ELK Stack</text>
  <text x="440" y="532" class="small-label" text-anchor="middle" fill="white">Logs</text>
  
  <!-- Data Flow -->
  <text x="600" y="600" class="subtitle" text-anchor="middle">データフロー</text>
  
  <!-- Legend -->
  <text x="100" y="680" class="subtitle">凡例</text>
  <rect x="100" y="690" width="15" height="15" class="web-server"/>
  <text x="125" y="702" class="small-label">Webアプリケーション</text>
  
  <rect x="100" y="710" width="15" height="15" class="database"/>
  <text x="125" y="722" class="small-label">データベース・キャッシュ</text>
  
  <rect x="100" y="730" width="15" height="15" class="minecraft"/>
  <text x="125" y="742" class="small-label">Minecraftサーバー</text>
  
  <rect x="300" y="690" width="15" height="15" class="load-balancer"/>
  <text x="325" y="702" class="small-label">ロードバランサー・管理</text>
  
  <rect x="300" y="710" width="15" height="15" fill="#E8F5E8" stroke="#4CAF50" stroke-width="1" stroke-dasharray="2,2"/>
  <text x="325" y="722" class="small-label">自動スケール対象</text>
  
  <!-- Arrows -->
  
  <!-- User to Load Balancer -->
  <line x1="125" y1="80" x2="245" y2="80" class="arrow"/>
  
  <!-- Load Balancer to Web Servers -->
  <line x1="350" y1="70" x2="445" y2="50" class="arrow"/>
  <line x1="350" y1="80" x2="445" y2="100" class="arrow"/>
  <line x1="350" y1="90" x2="445" y2="150" class="arrow"/>
  
  <!-- Web Servers to Database -->
  <line x1="530" y1="80" x2="645" y2="80" class="bidirectional"/>
  <line x1="530" y1="130" x2="645" y2="130" class="bidirectional"/>
  
  <!-- GitHub to CI/CD -->
  <line x1="130" y1="220" x2="195" y2="220" class="arrow"/>
  
  <!-- CI/CD to Web Servers -->
  <line x1="300" y1="220" x2="440" y2="160" class="arrow"/>
  
  <!-- Web Server 3 (Master) to Cloud -->
  <line x1="530" y1="155" x2="645" y2="210" class="arrow"/>
  
  <!-- Web Server 3 (Master) to Hosts -->
  <line x1="490" y1="180" x2="260" y2="325" class="arrow"/>
  <line x1="490" y1="180" x2="410" y2="325" class="arrow"/>
  <line x1="490" y1="180" x2="560" y2="325" class="arrow"/>
  
  <!-- Management Agent connections -->
  <line x1="700" y1="370" x2="475" y2="370" class="bidirectional"/>
  
  <!-- Monitoring connections -->
  <line x1="240" y1="500" x2="260" y2="415" class="arrow"/>
  <line x1="340" y1="500" x2="410" y2="415" class="arrow"/>
  <line x1="440" y1="500" x2="560" y2="415" class="arrow"/>
  
  <!-- Port Information -->
  <text x="100" y="620" class="small-label">ポート範囲: 25565-35565</text>
  <text x="100" y="635" class="small-label">自動停止: 30秒無接続</text>
  <text x="100" y="650" class="small-label">最大接続: 5人（拡張可能）</text>
  
  <text x="400" y="620" class="small-label">スケール条件: CPU/Memory 80%超過</text>
  <text x="400" y="635" class="small-label">マスター管理: Web Server 3統合型</text>
  <text x="400" y="650" class="small-label">プラグイン対応: Spigot/Paper</text>
</svg>